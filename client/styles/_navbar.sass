$logo-width: 324px
$engineers-menu-offset: 546px
$resoures-menu-offset: 460px
$looking-to-hire-menu-offset: 345px
$overlay-triangle-width: 26px
$navbar-overlay-content-width: 260px

.navbar__content
  width: 100%
  display: flex
  align-items: stretch
  border-bottom: #dedede 1px solid
  background-color: white
  +desktop
    height: $navbar-height
  +mobile
    height: $navbar-mobile-height

.navbar.navbar--has-promo-banner
  +desktop
    height: $navbar-height + $promo-banner-height
  +mobile
    height: $navbar-mobile-height + $promo-banner-height

.navbar__promo-banner
  height: $promo-banner-height
  right: 0
  line-height: $promo-banner-height
  &, a
    color: $red
  background-color: $lighter-red
  font-weight: $font-semi-bold
  text-align: center
  font-size: 16px
  +mobile
    font-size: 11px

.navbar__promo-banner.scrolled + .navbar__content
  .navbar-overlay--candidates
    top: $navbar-height

.navbar
  width: 100%
  display: flex
  flex-direction: column
  z-index: $navbar-z-index
  +desktop
    height: $navbar-height
  +mobile
    height: $navbar-mobile-height
    min-height: $navbar-mobile-height
    z-index: 2000

  .navbar-menu
    display: block
    position: fixed
    top: $navbar-mobile-height
    left: 0
    right: 0
    padding: 0
    height: 0%
    overflow-y: hidden
    transition: height 0.3s
    background-color: transparent
    border-top: 1px solid transparent
    box-shadow: none
    hr
      height: 0px
      margin: 0px 18px
      padding: 0
      border-top: 1px solid white
    &.is-open
      height: 100%
      border-top: 1px solid $white-two

  .navbar-menu-items
    background-color: $pale-gray
    box-shadow: 0 8px 16px rgba(10, 10, 10, 0.1);

  .navbar-menu-item
    background-color: $pale-gray
    display: block
    height: 48px
    padding: 12px 18px
    font-size: 12px
    line-height: 24px
    color: $steel-gray
    font-weight: $font-semi-bold

  .navbar-menu-item:last-of-type
    background-color: $red
    color: white
    font-weight: bold
    text-transform: uppercase

  .navbar-menu--candidates
    background-color: white
    height: 0px
    transition: height 0.3s
    overflow-y: hidden
    color: $steel-gray
    div:first-child
      padding: 20px 0px 0px 26px
    &.is-open
      height: 404px

  .navbar__search
    padding: 18px 0px 14px 0px
    display: flex
    +desktop
      min-width: 400px
    +mobile
      padding-top: 14px
      width: 38px
    height: 44px
    form
      height: 44px
      width: 100%
      &:focus-within
        border: 2px solid $red
        .search
          font-weight: $font-regular
          padding-left: 14px
        .search-button
          padding-right: 10px
        .clear-search
          padding-top: 4px
          padding-right: 10px
    .navbar-item
      padding: 0
      +mobile
        height: 20px
    .search
      flex: 1
      border: none
      outline: none
      background: none
      text-align: left
      color: black
      background-color: $pale-gray
      font-size: 14px
      letter-spacing: 0.5px
      height: 100%
      padding-left: 16px
      &::placeholder
        color: $red
        font-weight: $font-medium
    .clear-search
      font-size: 10px
      font-weight: $font-medium
      background-color: $pale-gray
      height: 100%
      padding-right: 12px
      padding-top: 6px
      letter-spacing: 0
    .search-button
      padding: 0
      border: none
      outline: none
      fill: $steel-gray
      width: 44px
      height: 100%
      background-color: $pale-gray
      +desktop
        padding-right: 14px
      +mobile
        background-color: unset
      .icon
        +desktop
          width: 22px
          height: 22px
        +mobile
          width: 100%
          height: 100%
        &:hover
          cursor: pointer

  .navbar-items
    display: flex
    align-items: center
  .navbar-item
    font-size: 14px
    line-height: 32px
    font-weight: $font-semi-bold
    letter-spacing: 0.5px
    color: $steel-gray
    +mobile
      font-size: 12px

  .navbar-item--register
    margin-right: 4px
    .button
      width: 135px
      height: 40px
      &:hover
        background-color: $button-hover !important

  .navbar-item--dropdown
    cursor: pointer
    transition: color 0.3s
    .icon
      fill: $steel-gray
      width: 24px
      height: 24px
      margin: 3px 0px 0px 0px
      transition: fill 0.3s, transform 0.3s
      &.is-open
        transform: rotate(180deg)
    &:hover
      color: $red
      .icon
        fill: $red

  .navbar-item--menu
    font-size: 10px
    font-weight: bold
    background-color: $steel-gray
    border-radius: 4px
    height: 25px
    padding: 0 16px
    margin: 12px 0 !important
    color: white
    line-height: 14px
    .navbar__unfinished-task-count
      position: absolute
      top: -6px
      right: -4px
    span
      line-height: 25px
    &:hover
      background-color: $greyish !important
      color: white !important

  .navbar-item--menu--open
    background-color: $greyish !important

  .navbar-item--login:before
    margin-right: 6px
    margin-top: 2px
    +desktop
      content: 'ðŸ™‚'
  a.navbar-item
    transition: color 0.3s
    +mobile
      margin-top: 2px
  a.navbar-item:hover
    background-color: white
    color: $red
  a.navbar-item--register:hover,
    background-color: white

  .navbar-item--login:hover
    +desktop
      &:before
        content: 'ðŸ˜Ž'

  .navbar-item--resources,
  .navbar-item--looking-to-hire
    padding-right: 2px

  .logo-title-container
    color: $steel-gray
    line-height: 1em

  .logo-title
    font-size: 16px
    letter-spacing: 3px
    font-weight: $font-medium
    vertical-align: text-bottom
    +desktop
      margin-top: 2px
    +mobile
      font-size: 11px
      letter-spacing: 1.5px
      margin-top: 10px
      margin-bottom: 10px

  .navbar__logo
    width: 40px
    height: 40px
    margin-right: 14px
    +mobile
      width: 30px
      height: 30px
      margin-right: 8px

  .navbar-item.navbar__logo-container
    display: flex
    align-items: center
    padding: 18px 40px
    +mobile
      flex-wrap: wrap
      flex: 1 1 auto
      padding: 8px 18px
      overflow-y: hidden


  .navbar__logo-container + .navbar-item
    padding-left: 0

  .navbar-end
    margin-right: 28px
    +mobile
      margin-right: 18px
    align-items: stretch
    display: flex
    justify-content: flex-end
    margin-left: auto

  .mobile-search
    display: flex
    align-items: center
    justify-content: center
    padding-right: 26px
    padding-left: 26px
    position: fixed
    top: 0
    bottom: 0
    left: 0
    right: 0
    z-index: 10
    background: $pale-gray
    visibility: hidden
    opacity: 0
    transition: visibility 0s linear 0.5s, opacity 0.5s linear
    &.is-open
      visibility: visible
      opacity: 1
      transition-delay: 0s
    .search-button
      border: 0
      background: 0
      padding-left: 0
      padding-right: 12px
      .icon
        width: 32px
        height: 32px

  .mobile-search-form
    display: flex
    align-items: center
    justify-content: flex-start
    width: 100%
    .search-button
      fill: $steel-gray
    .search
      font-size: 24px
      font-weight: $font-semi-bold
      border-top: 0
      border-left: 0
      border-right: 0
      border-bottom: 4px solid $greyish
      background: none
      outline: none
      color: $steel-gray
      display: inline-block
      width: 100%
    .search::placeholder
      color: $greyish

  .mobile-search__close
    position: fixed
    right: 10px
    top: 10px
    border: none
    background: none
    .icon
      fill: $steel-gray
      width: 32px
      height: 32px

  .navbar-overlay
    opacity: 0
    pointer-events: none
    position: fixed
    top: $navbar-height
    bottom: 0
    left: 0
    right: 0
    transition: opacity 0.3s
    &.is-open
      opacity: 1
      pointer-events: auto
  .navbar-overlay__inner
    width: 100%
    height: 100%
    position: relative
  .navbar-overlay__bg
    position: absolute
    top: 0
    left: 0
    bottom: 0
    right: 0
  .navbar-overlay__content
    position: absolute
    z-index: 1
  .navbar-overlay--candidates,
  .navbar-overlay--resources,
  .navbar-overlay--looking-to-hire,
    margin-top: -6px
    transition: opacity 0.3s, margin 0.2s ease-out
    &.is-open
      margin-top: 0px
    img
      position: absolute
      top: -24px
      z-index: 2
    .navbar-overlay__content
      border: 2px solid $red
      background-color: white
      width: $navbar-overlay-content-width
      top: -12px
      font-size: 14px
      color: $steel-gray
      box-shadow: 0 2px 4px 0 $greyish

  @mixin overlay-offset($amount)
    img
      left: $amount - ($overlay-triangle-width / 2)
    .navbar-overlay__content
      left: $amount - ($navbar-overlay-content-width / 2)

  .navbar-overlay--resources,
  .navbar-overlay--looking-to-hire
    .navbar-overlay__content
      padding: 26px
      a + a
        margin-top: 24px
      a
        display: block
        h3,p
          transition: color 0.3s
        &:hover
          h3,p
            color: $red
      h3
        font-weight: $font-semi-bold
        line-height: 1
        margin-bottom: 6px
      p
        color: $steel-gray
        line-height: 20px
        font-size: 13px
        margin: 0

  .navbar-overlay--candidates
    @include overlay-offset($engineers-menu-offset)
    .navbar-overlay__content
      div:first-child
        padding: 18px 23px 12px 23px

  .navbar-overlay--resources
    @include overlay-offset($resoures-menu-offset)

  .navbar-overlay--looking-to-hire
    @include overlay-offset($looking-to-hire-menu-offset)
    .navbar-overlay__content
      width: 488px
      left: $looking-to-hire-menu-offset - 244px

  .navbar-overlay--looking-to-hire-inner
    display: flex
    div:first-child
      padding-right: 26px
    & > div
      flex: 1
      padding-top: 18px



  .navbar-overlay--candidates__vertical-link,
  .navbar-menu--candidates__vertical-link
    display: block
    padding-left: 26px
    color: $steel-gray
    display: flex
    align-items: center
    line-height: 1em
    padding: 9px 0px 9px 26px
    &:hover
      background-color: $lighter-red2
    .icon
      width: 24px
      height: 26px
      margin-right: 18px

.navbar-search-end-wrapper
  display: flex
  flex: 1
  position: absolute
  left: $left-menu-width
  right: 0
  top: 0
  +desktop
    height: $navbar-height
  +mobile
    height: $navbar-mobile-height

.navbar-search-end
  margin: 0 auto
  width: 100%
  max-width: 1156px /* same as jobs board */
  min-width: 755px  /* same as jobs board */
  display: grid;
  grid-template-columns: 1fr 424px;
  .navbar__search
    grid-area: 1 / 2 / 1 / 2
    width: 39%
    float: right

.navbar__tasks
  margin: auto 0
  display: flex
  justify-content: flex-end
  margin-right: 12px
  position: relative
  .icon
    width: 32px
    height: 32px
    margin-right: 8px
  .navbar__unfinished-task-count
    position: absolute
    top: 1px
    right: 2px

.navbar__unfinished-task-count
  background-color: $red
  padding: 4px 4px
  color: white
  line-height: 0.9
  border-radius: 9px
  font-size: 10px
  font-weight: $font-medium
  height: 18px
  width: 18px
  border: 1px solid white
  text-align: center
  font-family: $family-primary

.navbar__tasks--clickable
  cursor: pointer

$tasks-width-desktop: 320px
.navbar__tasks__inner
  position: absolute
  width: $tasks-width-desktop
  height: 300px
  top: calc(100% + 10px)
  left: calc(100% - (#{$tasks-width-desktop} / 2) - 24px)
  z-index: 1
  .navbar-overlay__inner
    position: relative
  img
    position: absolute
    left: calc(50% - 12px)
    z-index: 2
  .navbar-overlay__content
    border: 2px solid $red
    background-color: white
    width: 100%
    top: 12px
    font-size: 14px
    color: $steel-gray
    box-shadow: 0 2px 4px 0 $greyish

.navbar__tasks-header
  padding: 12px
  background: $red
  color: white
  font-size: 12px
  line-height: 15px
  font-weight: $font-semi-bold

.navbar__task
  padding: 12px
  background-color: $lighter-red
  .is-flex
    align-items: center
  .title
    display: flex
    line-height: 0
    font-size: 12px
    font-weight: $font-medium
    color: $steel-gray
    justify-content: space-between
    align-items: center
    width: 100%
    +mobile
      line-height: 12px
    .icon
      display: none
  p
    font-size: 12px
    line-height: 15px
    font-weight: $font-regular
    color: $steel-gray
    margin-top: 6px
  .icon
    fill: $red
    width: 18px
    height: 18px

.navbar__task--read,
.navbar__task--complete
  background-color: white

.navbar__task--complete
  p
    display: none
  .title
    .icon
      display: initial

.navbar__task-container + .navbar__task-container
  border-top: 1px solid $red
.navbar__task-container:last-child
  border-bottom: 1px solid $red

.navbar__fullscreen-intercept
  position: fixed
  top: $navbar-height
  left: 0
  bottom: 0
  right: 0

.navbar-menu-close-area
  width: 100%
  height: 100%

.navbar--reset-z-index
  z-index: 0

/* apply promo banner height to various places
/* NOTE this is necessary because the overlay parent is FIXED, as it also acts as an interceptor
/* for clicks. In an ideal world we'd have two things; an interceptor AND the overlay, separately.
/* Then, the navbar-overlay position could track the navbar-content, rather than needing this workaround.
.navbar--has-promo-banner:not(.child-promo-has-scrolled)
  .navbar-overlay
    top: $navbar-height + $promo-banner-height
